(window.klaviyoOnsiteJSONP=window.klaviyoOnsiteJSONP||[]).push([[4],{"../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return ee}));var n=o("../forms/src/Constants/components.ts"),r=o("../../node_modules/preact/compat/dist/compat.module.js"),i=o("../forms/node_modules/react-redux/es/index.js"),s=o("../forms/src/ClientStore/index.ts"),a=o("../../node_modules/@babel/runtime/helpers/extends.js"),l=o.n(a),c=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),d=o.n(c);o("../forms/src/Client/Components/FormComponents/RichText/editorCSS.scss");const m=["html"];var u=e=>{let{html:t}=e,o=d()(e,m);return r.default.createElement("div",l()({},t?{dangerouslySetInnerHTML:{__html:t}}:{},{style:{width:"100%"},className:`${n.o} ${n.l}`},o))},p=o("../forms/src/Constants/quill.ts");var f=({itemId:e,parentType:t=p.a})=>{const o=Object(i.c)(o=>t===p.b?s.y.getTeaserQuillHTML(o,e):s.i.getComponentQuillHTML(o,e));return o?r.default.createElement(u,{html:o}):null},b=o("../forms/src/Client/Components/ResetElements/index.tsx"),g=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../forms/src/Client/formActions/formActions.ts")),h=o("../forms/src/Constants/actions.ts");const y=["children","actionId","formVersionCId"];var C=e=>{let{children:t,actionId:o,formVersionCId:n}=e,a=d()(e,y);const[l,c]=Object(r.useState)(!1),m=Object(i.c)(e=>o?s.b.getAriaPropsFromFormAction(e,o):{});return t(Object.assign({onClick:o?()=>{if(o){const e=Object(g.a)({actionId:o,formVersionCId:n}),t=new e({actionId:o,formVersionCId:n});h.c.has(e.formActionType)&&c(!0),t.runAction().catch(()=>{c(!1);const e=document.querySelector(`.klaviyo-form-version-cid_${n} [aria-invalid="true"]`);e&&e.focus()})}}:void 0,handlingFormAction:l,ariaProps:m},a))};const x=()=>null;var I=({formVersionCId:e,componentId:t})=>{const o=Object(i.c)(s.e.isDesignWorkflow),n=Object(i.c)(e=>s.i.getComponentStyling(e,t)),a=Object(i.c)(e=>s.i.getComponentImage(e,t)),c=Object(i.c)(e=>s.i.getComponentAltText(e,t)),d=Object(i.c)(e=>s.i.getComponentActionId(e,t)),m=d?b.d:b.e,u=n.width||100;return r.default.createElement(b.b,{style:{display:"flex",alignItems:"center",width:"100%",height:"auto"}},o&&!a?r.default.createElement(x,null):a&&r.default.createElement(C,{actionId:d,formVersionCId:e},({onClick:e,handlingFormAction:t,ariaProps:n})=>r.default.createElement(b.b,{className:t?"klaviyo-spinner":"",style:{position:"relative",display:"flex",alignItems:"center",width:"100%",height:"auto"},onClick:e},r.default.createElement(m,l()({style:{maxWidth:"100%",width:u,height:"auto",cursor:e?"pointer":"initial"},src:a.url,alt:c,tabIndex:o||!d?-1:0},n)))))},v=(o("../../node_modules/core-js/modules/es6.regexp.replace.js"),o("../../node_modules/lodash-es/uniqueId.js")),j=o("../../node_modules/goober/dist/goober.esm.js"),O=o("../forms/src/Utils/onsiteApi/learnq.ts"),S=o("../forms/src/Client/Components/ResetElements/CleaveInput.tsx"),w=o("../forms/src/Client/Components/FormComponents/Label.tsx"),E=o("../forms/src/Client/Components/FormComponents/ValidationMessage.tsx");let T,k=e=>e;var _=({formVersionCId:e,componentId:t,theme:o})=>{var a;const l=Object(i.c)(s.e.isDesignWorkflow),c=Object(i.c)(o=>s.u.getOpenFormVersionComponentInstance(o,e,t)),d=Object(i.c)(e=>s.i.getComponentLabel(e,t)),m=Object(i.c)(e=>s.i.getComponentPlaceholder(e,t)),u=Object(i.c)(e=>s.i.getComponentType(e,t)),p=Object(i.c)(e=>s.i.getComponentFormat(e,t)),f=Object(i.c)(e=>s.i.getComponentDelimiter(e,t)),g=Object(i.c)(e=>s.i.getComponentPrefill(e,t)),h=Object(i.b)(),{current:y}=Object(r.useRef)(Object(v.a)("klaviyo_ariaid_")),[C,x]=Object(r.useState)(!1),[I,_]=Object(r.useState)(!1),[V,$]=Object(r.useState)(),F=({value:o,validate:r,hasChangedSinceLastValidation:i})=>{var a;const l=void 0!==o?o:"";$(l),x(!1),_(!!i),h(s.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:u===n.c?null==(a=n.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(p)))?void 0:a.convertValue(l,f):l,validate:r}))};Object(r.useEffect)(()=>{const e=Object(O.b)();if(g&&e&&u===n.g&&!l){const{$email:t}=e;F({value:t,validate:!1})}},[]);const A=I||!1==!l||!c||void 0===c.valid||c.valid,D=u!==n.c||m&&!C?m:null==(a=n.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(p)))?void 0:a.label.replace(/ /g,f),z=u===n.c?S.a:b.f;return r.default.createElement(b.b,{style:{display:"flex",flexGrow:1,flexDirection:"column",alignSelf:"flex-end"}},r.default.createElement(w.a,{theme:o},d),r.default.createElement(z,{className:Object(j.a)(T||(T=k`
&& {
          &&& {
            &::placeholder {
              color: ${0};
              font-family: ${0};
              font-size: ${0};
              font-weight: ${0};
              letter-spacing: ${0}px;
            }
            &::-moz-placeholder {
              line-height: ${0}px;
            }
            &:hover {
              border-color: ${0} !important;
            }
          }
        }
`),o.inputStyles.textStyles.placeholderColor,o.inputStyles.textStyles.fontFamily,o.inputStyles.textStyles.fontSize,o.inputStyles.textStyles.fontWeight,o.inputStyles.textStyles.letterSpacing,o.inputStyles.textStyles.height,o.inputStyles.border.activeColor),style:Object.assign({boxSizing:"border-box",borderRadius:2,paddingLeft:16,paddingRight:0,paddingTop:0,paddingBottom:0,height:o.inputStyles.textStyles.height,textAlign:"left",color:o.inputStyles.textStyles.formInputTextColor,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.fontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,backgroundColor:o.inputStyles.inputBackgroundColor,border:"1px solid",borderColor:o.inputStyles.border[A?"defaultColor":"errorColor"]},C?{borderColor:o.inputStyles.border[A?"activeColor":"errorColor"],boxShadow:"0 0 5px "+o.focusColor}:{}),type:(e=>{switch(e){case n.g:return"email";case n.k:return"tel";default:return"text"}})(u),name:u===n.g?"email":void 0,tabIndex:l?-1:0,placeholder:D,"aria-label":(()=>{let e;return e=u===n.c?"date":u===n.g?"email":"text",d||m||e})(),"aria-invalid":!A,"aria-describedby":A?void 0:y,onBlur:e=>F({value:e.target.value,validate:!0,hasChangedSinceLastValidation:!1}),onChange:e=>F({value:e.target.value,validate:!1,hasChangedSinceLastValidation:!0}),onFocus:()=>x(!0),options:u===n.c?{date:!0,datePattern:p,delimiter:f}:{delimiter:""},value:V||""}),!l&&!I&&r.default.createElement(E.a,{theme:o,formVersionCId:e,componentAriaID:y,componentInstance:c}))},V=o("../forms/src/Constants/defaultTheme/button.ts");let $,F=e=>e;const{THEME_KEY:A}=V.a;var D=({componentId:e,formVersionCId:t,theme:o})=>{const n=Object(i.c)(t=>s.i.componentSelectById(t,e)),a=Object(i.c)(t=>s.i.getComponentActionId(t,e)),l=Object(i.c)(s.e.isDesignWorkflow),c=Object(j.a)($||($=F`
&& {
    &&& {
      &:focus {
        box-shadow: 0 0 5px ${0};
      }
      ${0}
    }
  }
`),o.focusColor,!1!==o[A].specifyHoverBackgroundColor?`\n      &:hover {\n        background-color: ${o[A].hoverBackgroundColor} !important;\n        ${o[A].hoverTextColor||o[A].textColor?`color: ${o[A].hoverTextColor||o[A].textColor} !important;`:""}\n      }`:"");return r.default.createElement(C,{formVersionCId:t,actionId:a},({onClick:e,handlingFormAction:t})=>r.default.createElement(b.a,{className:t?"klaviyo-spinner "+c:c,style:Object.assign({background:o[A].backgroundColor,borderRadius:o[A].borderRadius,borderStyle:o[A].borderStyle,borderColor:o[A].borderColor,borderWidth:o[A].borderWidth,color:o[A].textStyles.color,fontFamily:o[A].textStyles.fontFamily,fontSize:o[A].textStyles.fontSize,fontWeight:o[A].textStyles.fontWeight,letterSpacing:o[A].textStyles.letterSpacing,lineHeight:1,whiteSpace:"normal",paddingTop:11,paddingBottom:11,textAlign:"center",wordBreak:"break-word",alignSelf:"flex-end",cursor:"pointer"},o[A].fullWidth?{width:"100%"}:{paddingLeft:10,paddingRight:10}),type:"button",onClick:e,tabIndex:l?-1:0},n.data.content))};o("../../node_modules/core-js/modules/es6.regexp.to-string.js");const z=["selectorType","fillColor","formVersionCId"],R=({fillColor:e})=>r.default.createElement("g",{id:"checkboxInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"checkbox_on",transform:"translate(3.000000, 4.000000)",fill:"#303B43"},r.default.createElement("polygon",{id:"Shape",fill:e,points:"4.45454545 9.20149254 1.11363636 5.75373134 0 6.90298507 4.45454545 11.5 14 1.64925373 12.8863636 0.5"}))),M=({fillColor:e})=>r.default.createElement("g",{id:"radioInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"Group-17-Copy",transform:"translate(4.000000, 4.000000)",fill:"#303B43"},r.default.createElement("circle",{fill:e,id:"Oval-Copy",cx:"6",cy:"6",r:"5.55555556"})));var N=e=>{let{selectorType:t,fillColor:o}=e,n=d()(e,z);return r.default.createElement("svg",l()({style:{cursor:"pointer",display:"none",position:"absolute",margin:0},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n),r.default.createElement("defs",null),"radio"===t?r.default.createElement(M,{fillColor:o}):r.default.createElement(R,{fillColor:o}))};let W,P=e=>e;const B=["selectorType","valid","theme","formVersionCId"],H=({backgroundColor:e})=>r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("rect",{strokeWidth:"1",x:"0.5",y:"0.5",width:"19",height:"19",rx:"2.22222222",fill:e}))),L=({backgroundColor:e})=>r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("circle",{strokeWidth:"1",cx:"10",cy:"10",r:"9.5",fill:e})));var q=e=>{let{selectorType:t,valid:o,theme:n}=e,i=d()(e,B);return r.default.createElement("svg",l()({className:Object(j.a)(W||(W=P`
&& {
        &&& {
          input:focus + label + label > * {
            filter: drop-shadow(0px 0px 2px ${0});
            stroke: ${0};
          }
        }
      }
`),n.focusColor,n.inputStyles.border.activeColor),style:{stroke:o?n.inputStyles.border.defaultColor:n.inputStyles.border.errorColor,marginRight:8,minWidth:20,width:"auto",height:"auto"},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},i),"radio"===t?r.default.createElement(L,{backgroundColor:n.inputStyles.inputBackgroundColor}):r.default.createElement(H,{backgroundColor:n.inputStyles.inputBackgroundColor}))};var U=({name:e,label:t,isValid:o,componentAriaID:i,componentType:s,onChange:a,tabIndex:l,theme:c,formVersionCId:d})=>{const{current:m}=Object(r.useRef)(Object(v.a)(e+"__")),u=s===n.m?"radio":"checkbox";return r.default.createElement(r.default.Fragment,null,r.default.createElement(b.f,{style:{position:"absolute",width:0,opacity:0},tabIndex:l,type:u,id:m,name:e,onChange:a,"aria-invalid":!o,"aria-label":t,"aria-describedby":i}),r.default.createElement(b.g,{style:{display:"flex",alignItems:"center",flex:c.inputStyles.arrangement===n.a?" 1 0 100%":" 0 0 auto",paddingBottom:8,wordBreak:"break-word",maxWidth:"100%",cursor:"pointer"},htmlFor:m},r.default.createElement(q,{valid:o,selectorType:u,"aria-hidden":"true",theme:c,formVersionCId:d}),r.default.createElement(N,{selectorType:u,"aria-hidden":"true",formVersionCId:d,fillColor:c.inputStyles.textStyles.formInputTextColor}),r.default.createElement(b.b,{style:{cursor:"pointer",color:c.inputStyles.textStyles.color,fontFamily:c.inputStyles.textStyles.fontFamily,fontSize:c.inputStyles.textStyles.fontSize,fontWeight:c.inputStyles.textStyles.fontWeight,letterSpacing:c.inputStyles.textStyles.letterSpacing,marginRight:24,display:"flex",position:"relative",top:1}},t)))};let K,Y=e=>e;const J=["selected","id","label"],G=({options:e,componentType:t,toggledOptionIndex:o})=>e.reduce((e,r,i)=>{let{selected:s,id:a,label:l}=r,c=d()(r,J),m=t!==n.m&&s;return o===i&&(m=!m),e.push(Object.assign({selected:m,label:l,id:a||Object(v.a)(l+"__")},c)),e},[]);var X=({formVersionCId:e,componentId:t,theme:o})=>{const a=Object(i.c)(s.e.isDesignWorkflow),l=Object(i.c)(o=>s.u.getOpenFormVersionComponentInstance(o,e,t)),c=Object(i.c)(e=>s.i.getComponentType(e,t)),d=Object(i.c)(e=>s.i.getComponentDropdownOptions(e,t)),m=Object(i.c)(e=>s.i.getComponentFieldId(e,t)),u=Object(i.c)(e=>s.i.getComponentLabel(e,t)),p=Object(i.b)(),[f,g]=Object(r.useState)([]);Object(r.useEffect)(()=>{g(G({options:d,componentType:c}))},[d]);const{inputName:h,labelId:y}=Object(r.useMemo)(()=>{const e=Object(v.a)(m+"__");return{inputName:e,labelId:`kl_${e}_label`}},[]),C=a||!l||void 0===l.valid||l.valid;return r.default.createElement(b.b,{className:Object(j.a)(K||(K=Y`
&& {
        &&& {
          input:focus + label > svg circle,
          input:focus + label > svg rect {
            stroke: ${0};
          }
        }
      }
`),o.inputStyles.border.activeColor),style:Object.assign({alignSelf:"flex-end"},o.inputStyles.arrangement===n.a?{display:"block"}:{flexDirection:"column",flexWrap:"wrap"})},r.default.createElement(w.a,{id:y,theme:o,style:{marginRight:8,marginBottom:8}},u),r.default.createElement(b.b,{style:Object.assign({},o.inputStyles.arrangement===n.a?{display:"block"}:{display:"inline-flex",justifyContent:"flex-start",flexWrap:"wrap"}),role:c===n.m?"radiogroup":"group","aria-labelledby":y},f.map(({label:i,id:l},d)=>r.default.createElement(U,{key:l,formVersionCId:e,theme:o,name:h,label:i,isValid:C,componentType:c,componentAriaID:y,onChange:()=>(o=>{const r=G({options:f,componentType:c,toggledOptionIndex:o});g(r);const i=(e=>e.filter(({selected:e})=>e).map(e=>e.value||e.label))(r);p(s.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:c===n.m?i.toString():i}))})(d),tabIndex:a?-1:0}))),!a&&r.default.createElement(E.a,{theme:o,formVersionCId:e,componentAriaID:y,componentInstance:l}))};var Q=(e,t=(()=>r.default.createElement(r.default.Fragment,null)))=>{function o(o){const[n,i]=r.default.useState(0),s=r.default.useCallback(()=>i(e=>e<5?e+1:e),[]),a=r.default.useMemo(()=>r.default.lazy(()=>e().catch(()=>({default:()=>(s(),r.default.createElement(r.default.Fragment,null))}))),[e,n]);return r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(t,null)},r.default.createElement(a,o))}return o.displayName="LazyLoader",o};const Z=f,ee={[n.h]:I,[n.p]:Z,[n.q]:_,[n.g]:_,[n.k]:Q(()=>Promise.all([o.e(1),o.e(11),o.e(3)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/PhoneNumberInput/index.ts"))),[n.b]:D,[n.j]:X,[n.m]:X,[n.c]:_,[n.f]:Q(()=>Promise.all([o.e(1),o.e(2)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/Dropdown/index.ts")))}},"../forms/src/Client/Components/FormComponents/Label.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),s=o.n(i),a=o("../../node_modules/preact/compat/dist/compat.module.js"),l=o("../forms/src/Client/Components/ResetElements/index.tsx");const c=["children","theme","style"];t.a=e=>{let{children:t,theme:o,style:n}=e,i=s()(e,c);return t?a.default.createElement(l.g,r()({style:Object.assign({color:o.inputStyles.textStyles.color,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.labelFontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,paddingBottom:6},n)},i),t):null}},"../forms/src/Client/Components/FormComponents/ValidationMessage.tsx":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.regexp.replace.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/goober/dist/goober.esm.js"),s=o("../forms/src/Client/Components/ResetElements/index.tsx"),a=o("../forms/src/Client/formValidation/isRequired.ts"),l=o("../forms/src/Client/formValidation/email.ts"),c=o("../forms/src/Client/formValidation/date.ts"),d=o("../forms/src/Client/formValidation/phoneNumber.ts"),m=o("../forms/src/Constants/components.ts"),u=o("../forms/src/ClientStore/index.ts");let p,f=e=>e;t.a=({formVersionCId:e,componentInstance:t,componentAriaID:o,theme:b})=>{const g=Object(r.c)(t=>u.q.getFormVersionFormTypeDirection(t,u.u.getOpenFormVersionFormVersionId(t,e))),h=!(null==g||!g.startsWith("BOTTOM")),y=b.inputStyles.textStyles.errorColor;return n.default.createElement(s.b,{style:{width:"100%",position:"relative"}},(null==t?void 0:t.validationErrorType)&&n.default.createElement(s.b,{style:Object.assign({backgroundColor:"white",position:"absolute",zIndex:1,right:0,borderRadius:4,animation:"klaviyo-fadein 0.4s"},h?{bottom:47}:{top:9})},n.default.createElement(s.b,{className:Object(i.a)(p||(p=f`
&& {
              &&& {
                &::after {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  left: 8px;
                  border-width: 8px;
                  ${0}
                }
                &::before {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  border-width: 9px;
                  left: 7px;
                  ${0};
                }
              }
            }
`),h?"bottom: -15px;\n                  border-color: rgb(248, 236, 233) transparent transparent transparent;":"top: -15px;\n                  border-color: transparent transparent rgb(248, 236, 233) transparent;",h?`bottom: -17px;\n                    border-color: ${y} transparent transparent transparent;`:`top: -17px;\n                    border-color: transparent transparent ${y} transparent;`),style:{borderRadius:4,boxShadow:"1px 1px 4px 0 rgba(0, 0, 0, 0.26)",border:"1px solid "+b.inputStyles.textStyles.errorColor,backgroundColor:"rgb(248, 236, 233)"}},n.default.createElement(s.i,{style:{fontSize:14,padding:8,fontFamily:b.inputStyles.textStyles.fontFamily,color:b.inputStyles.textStyles.errorColor},role:"alert",id:o},(({validationErrorType:e,metadata:t})=>{var o;switch(e){case a.b:return"This field is required";case l.b:return"Please enter a valid email address";case c.b:return`Please enter a valid date format (${null==(o=m.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(null==t?void 0:t.format)))?void 0:o.label.replace(/ /g,(null==t?void 0:t.delimiter)||"/")})`;case d.b:return"Please enter a valid phone number";default:return""}})(t)))))}},"../forms/src/Client/Components/Modal/Modal.tsx":function(e,t,o){"use strict";o.r(t);o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../forms/src/Constants/defaultTheme/view.ts"),s=o("../forms/src/Constants/formTypes.ts"),a=o("../forms/src/Constants/designer.ts"),l=o("../forms/src/Constants/views.ts"),c=o("../forms/src/Constants/modal.ts"),d=o("../../node_modules/lodash-es/uniqueId.js"),m=o("../../node_modules/goober/dist/goober.esm.js"),u=o("../forms/src/Client/Components/View/index.ts"),p=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),f=o("../../node_modules/@babel/runtime/helpers/extends.js"),b=o.n(f),g=o("../../node_modules/lodash-es/merge.js"),h=o("../forms/src/ClientStore/index.ts"),y=o("../forms/src/Client/Components/ResetElements/index.tsx"),C=o("../forms/src/Constants/defaultTheme/clientThemeConstants.ts");const x=()=>null;var I=({formVersionId:e,onClick:t})=>{var o;const i=Object(r.b)(),[s,l]=Object(n.useState)(!1),c=!!Object(r.c)(h.n.getXButtonActive),d=Object(r.c)(h.e.isDesignWorkflow),m=C.a.dismiss,u=null==(o=Object(r.c)(t=>h.q.getFormVersionDataStyling(t,e)))?void 0:o.dismissButtonStyles,p=Object(g.a)({},m,u),f=p.size,I=s||c;return n.default.createElement(n.default.Fragment,null,I&&n.default.createElement(x,{size:f,isSelected:c,$margin:p.margin}),n.default.createElement(y.k,b()({width:f,height:f,tabIndex:0,alt:"Close form",style:{right:0,top:0,position:"absolute",zIndex:6,cursor:"pointer",height:f+"px",width:f+"px",marginRight:p.margin.right+"px",marginTop:p.margin.top+"px"},className:d?"":"klaviyo-close-form",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,"aria-describedby":"close-form"},d&&{onClick:()=>{i(h.n.slice.actions.setActiveSidebar({type:a.d}))},onMouseOver:()=>{l(!0)},onMouseLeave:()=>l(!1)}),n.default.createElement("title",{id:"close-form"},"Close form"),n.default.createElement("circle",{style:{cursor:"pointer"},cx:"10",cy:"10",r:"9.5",fill:p.backgroundColor,stroke:p.borderColor}),n.default.createElement("path",{style:{cursor:"pointer"},d:"M6 6L14 14M6 14L14 6L6 14Z",stroke:p.xColor,strokeWidth:p.xStroke,strokeLinecap:"round",strokeLinejoin:"round"})))},v=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),j=o.n(v),O=o("../forms/src/Constants/animation.ts");const S=["formType","formTypeDirection","animatingOut","endAnimationCallback"],w={LEFT:"slideinleft",TOP_CENTER:"slideinup",BOTTOM_CENTER:"slideindown",RIGHT:"slideinright"},E=({formType:e,formTypeDirection:t,animatingOut:o=!1})=>{const n=e===s.j?"fadeinup":w[Object.keys(w).find(e=>t&&t.endsWith(e))];return Object.assign({},O.a,{animationName:"klaviyo-"+n},o?{animationDirection:"reverse",animationDuration:e===s.j?"0.35s":".5s"}:{animationDirection:"normal",animationDuration:e===s.j?"0.35s":"1s"})},T=({formTypeDirection:e,modalScale:t})=>{const o={TOP:{top:0},CENTER:{top:"50%",transform:`scale(${t}) translateY(-50%)`,marginTop:"auto",marginBottom:"auto"},BOTTOM:{bottom:0}},n={LEFT:{left:0},CENTER:{left:"50%",transform:`scale(${t}) translateX(-50%)`,marginLeft:"auto",marginRight:"auto"},RIGHT:{right:0}};return Object.assign({},o[Object.keys(o).find(t=>e&&e.startsWith(t))],n[Object.keys(n).find(t=>e&&e.endsWith(t))])},k=e=>{let{formType:t,formTypeDirection:o,animatingOut:r=!1,endAnimationCallback:i=(()=>{})}=e,s=j()(e,S);const[a,l]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{r&&l(!1)},[r]),n.default.createElement(y.b,b()({},s,{onAnimationEnd:()=>{l(!0),i()},style:(!a||r)&&E({formType:t,formTypeDirection:o,animatingOut:r})||{}}))};var _=o("../forms/src/Utils/isMobile.ts");var V=()=>window.matchMedia("(orientation: landscape)").matches;var $=(e,t)=>{var o,n;let r=e.formType===s.i&&[s.g,s.f].includes(null==(o=e.data)||null==(n=o.flyoutOptions)?void 0:n.docking);Object(_.a)()&&V()&&(r=!1);let i=e.formTypeDirection||null;var a,l;r&&t&&(i=(null==(a=e.data)||null==(l=a.flyoutOptions)?void 0:l.docking)===s.g?s.k:s.a);return{isDocked:r&&t,evaluatedFormTypeDirection:i}};let F,A=e=>e;var D=({closePortal:e,formVersionCId:t,style:o,onClose:l})=>{var c,f;const b=Object(r.c)(e=>h.u.openFormVersionSelectById(e,t)),g=Object(r.c)(e=>h.q.formVersionSelectById(e,b.formVersionId)),C=Object(r.c)(e=>h.q.getFormVersionDismissalConfig(e,g.formVersionId)),x=Object(r.c)(h.n.getMobileDesktopType),v=Object(r.c)(h.e.isDesignWorkflow),j=Object(r.c)(h.u.getTopModalCId),O=Object(r.c)(e=>h.C.getViewDataStylingBorderRadius(e,b.currentViewId)),S=Object(r.c)(e=>h.C.getViewDataStylingDropShadow(e,b.currentViewId)),[w,E]=Object(n.useState)(),[T,V]=Object(n.useState)(!1),D=Object(n.useCallback)(()=>{T&&e()},[T]),z=Object(n.useRef)(null);Object(n.useEffect)(()=>{E(Object(d.a)("modal_animation_key"))},[g.formType,g.formTypeDirection,x]);const R=()=>{l(),V(!0)};Object(n.useEffect)(()=>{const o=o=>{var n,r,i;null!=(n=z.current)&&n.contains(o.target)||v||t!==j||null===e||b.currentTeaserId||(r=g.formType,void 0!==(i=C)&&r===s.j&&(Object(_.a)()?!0===(null==i?void 0:i.mobile):!0===(null==i?void 0:i.desktop)))||R()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[v,t,j,e,C]);const{isDocked:M,evaluatedFormTypeDirection:N}=$(g,v?x===a.e:Object(_.a)()),W=null==(c=g.data)||null==(f=c.styling)?void 0:f.margin;return w?n.default.createElement(y.b,{ref:z,role:"dialog","aria-modal":"true",style:Object.assign({},o,{borderRadius:(O||i.a.theme.borderRadius)+"px",position:"relative",outline:0,display:"flex",justifyContent:"center",flex:"0 0 auto"},g.formType===s.j?{alignSelf:"center"}:{}),"data-testid":x},n.default.createElement(n.Suspense,{fallback:n.default.createElement(y.b,null)},n.default.createElement(k,{key:w,formType:g.formType,formTypeDirection:N,animatingOut:T,endAnimationCallback:D,"data-testid":g.formType},(P=n.default.createElement(y.b,{style:Object.assign({},S&&S.enabled?{boxShadow:`0px 0px ${S.blur}px ${S.color}`}:{},O?{borderRadius:O+"px"}:{})},n.default.createElement(y.b,{style:{position:"relative",display:"flex"}},n.default.createElement(I,{formVersionId:b.formVersionId,onClick:R}),b.showErrorView?n.default.createElement(p.a,null):n.default.createElement(u.a,{formVersionCId:t,formVersionId:b.formVersionId,viewId:b.currentViewId,isDocked:M,formTypeDirection:N}))),M?P:n.default.createElement(y.b,{className:Object(m.a)(F||(F=A`
&& {
            &&& {
              &::before {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
              &::after {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
            }
          }
`),(null==W?void 0:W.top)||0,(null==W?void 0:W.bottom)||0),style:{position:"relative",flexDirection:"column",display:"flex",marginLeft:null==W?void 0:W.left,marginRight:null==W?void 0:W.right}},P))))):null;var P},z=o("../forms/src/Utils/calculateSideImageSize.ts");const R=(e,t)=>e===s.i&&t?t.startsWith("BOTTOM")?"flex-end":t.startsWith("CENTER")?"center":"flex-start":"center";t.default=({formVersionCId:e,closePortal:t,className:o})=>{var d,m,u,p;const f=Object(n.useRef)(null),b=Object(r.c)(t=>h.u.openFormVersionSelectById(t,e)),g=Object(r.c)(e=>h.q.formVersionSelectById(e,b.formVersionId));let C=Object(r.c)(e=>h.C.getViewDataStylingSize(e,b.currentViewId))||i.a.theme.size;const x=Object(r.c)(e=>h.q.getFormVersionSideImage(e,b.formVersionId)),I=null==x||null==(d=x.data)||null==(m=d.styling)?void 0:m.sizeMultiplier,v=I?Object(z.a)(I,C):0,j=Object(r.c)(h.e.isDesignWorkflow),O=Object(r.c)(h.n.getMobileDesktopType),S=O===a.e&&j,{isDocked:w,evaluatedFormTypeDirection:E}=$(g,j?O===a.e:Object(_.a)());(Object(_.a)()||S)&&x&&!x.displayOnMobile&&(C-=v);const k=null==(u=g.data)||null==(p=u.styling)?void 0:p.margin,V=w?0:(null==k?void 0:k.left)||0,F=w?0:(null==k?void 0:k.right)||0,A=Math.max(Math.min(parseInt(C.toString(),10),l.a),l.b)+F+V,M=Object(r.c)(e=>h.C.getViewDataStylingOverlayColor(e,b.currentViewId))||i.a.theme.overlayColor,N=Object(r.c)(e=>{var t;return null==(t=h.C.getViewDataStyling(e,b.currentViewId))?void 0:t.mobileOverlay})||i.a.theme.mobileOverlay,W=Object(r.c)(h.e.isFetchingForms),[P,B]=Object(n.useState)(1),[H,L]=Object(n.useState)(!1),q={animationDuration:"0.35s",animationTimingFunction:"ease",animationPlayState:"running",animationDelay:"0s",animationIterationCount:1,animationFillMode:"forwards"},U=Object.assign({},q,{animationName:"klaviyo-fadeout"}),K=Object.assign({},q,{animationName:"klaviyo-fadein"});var Y,J,G;Object(n.useEffect)(()=>{const e=()=>{const e=S?a.f:window.innerWidth,t=w?e/A:Math.min(e/A,1);B(t)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[A,O]),Y=f.current,J=j,G=g.formType,Object(n.useEffect)(()=>{let e;return J||G!==s.j||(e=null==Y?void 0:Y.addEventListener("keydown",e=>{if("Tab"!==e.key&&9!==e.keyCode)return;const t=Y.querySelectorAll('[tabindex]:not([tabindex="-1"])'),o=t[0],n=t[t.length-1];e.shiftKey?document.activeElement===o&&(n.focus(),e.preventDefault()):document.activeElement===n&&(o.focus(),e.preventDefault())})),()=>e?null==Y?void 0:Y.removeEventListener("keydown",e):void 0},[Y,J,G]);let X={display:"flex",zIndex:j?0:c.a};X=O===a.e&&j?Object.assign({},X,{position:"relative",justifyContent:"center",alignItems:R(g.formType,E),backgroundColor:g.formType===s.i?(null==N?void 0:N.enabled)&&(null==N?void 0:N.color)||"transparent":M,alignSelf:"center",height:"100%",width:"100%"}):g.formType===s.i?Object.assign({},X,Object.assign({maxHeight:j?"100%":100/P+"%",position:j?"absolute":"fixed",transform:`scale(${P})`,transformOrigin:`${E&&E.endsWith("RIGHT")?"right":"left"} ${E&&E.startsWith("BOTTOM")?"bottom":"top"}`,overflow:j?"initial":"visible"},T({formTypeDirection:E,modalScale:P}))):Object.assign({},X,{position:j?"initial":"fixed",left:0,top:0,width:"100%",height:"100%",justifyContent:"center",alignItems:j?"flex-start":"center",overflow:"auto",backgroundColor:M},H?U:K);let Q={};O===a.e&&j?Q=Object.assign({position:"absolute",transform:`scale(${P})`,transformOrigin:g.formType===s.i&&E?""+(E.startsWith("BOTTOM")?"bottom":"top"):"center",maxHeight:j?"100%":100/P+"%"},g.formType!==s.i||w||1!==P?{}:T({formTypeDirection:E,modalScale:P})):g.formType===s.j&&(Q={overflow:j?"initial":"visible",transform:`scale(${P})`,transformOrigin:"center",maxHeight:j?"100%":100/P+"%"});return Z=g.formType===s.i&&Object(_.a)()&&(null==N?void 0:N.enabled),ee=n.default.createElement(y.b,{className:o||"",style:X,ref:f},W?n.default.createElement(y.h,null,"Loading..."):n.default.createElement(D,{closePortal:t,formVersionCId:e,style:Q,onClose:()=>L(!0)})),Z?n.default.createElement(y.b,{style:N&&N.enabled?{backgroundColor:null==N?void 0:N.color,height:"100%",width:"100%",left:0,top:0,position:"fixed",zIndex:c.a}:{}},ee):ee;var Z,ee}},"../forms/src/Client/Components/ResetElements/CleaveInput.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=o("../../node_modules/preact/compat/dist/compat.module.js"),s=o("../forms/src/Constants/components.ts");const a=i.default.lazy(()=>o.e(13).then(o.t.bind(null,"../../node_modules/cleave.js/react.js",7))),l=e=>i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(a,r()({},e,{className:`needsclick ${e.className} ${s.o}`})))},"../forms/src/Client/Components/ResetElements/index.tsx":function(e,t,o){"use strict";o.d(t,"b",(function(){return m})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return p})),o.d(t,"h",(function(){return f})),o.d(t,"e",(function(){return b})),o.d(t,"i",(function(){return g})),o.d(t,"j",(function(){return h})),o.d(t,"f",(function(){return y})),o.d(t,"d",(function(){return C})),o.d(t,"k",(function(){return x})),o.d(t,"g",(function(){return I}));var n=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),r=o.n(n),i=o("../../node_modules/@babel/runtime/helpers/extends.js"),s=o.n(i),a=o("../../node_modules/preact/compat/dist/compat.module.js"),l=o("../forms/src/Constants/components.ts");o("../forms/src/Client/client.scss");const c=["tabIndex","className","alt"],d=["tabIndex","className","style","alt"],m=a.default.forwardRef((e,t)=>a.default.createElement("div",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),u=a.default.forwardRef((e,t)=>a.default.createElement("form",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),p=a.default.forwardRef((e,t)=>a.default.createElement("button",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}),e.children)),f=a.default.forwardRef((e,t)=>a.default.createElement("p",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),b=a.default.forwardRef((e,t)=>a.default.createElement("img",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),g=a.default.forwardRef((e,t)=>a.default.createElement("span",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),h=a.default.forwardRef((e,t)=>a.default.createElement("svg",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),y=a.default.forwardRef((e,t)=>a.default.createElement("input",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),C=e=>{let{tabIndex:t,className:o,alt:n}=e,i=r()(e,c);return a.default.createElement(p,{type:"button",tabIndex:t,className:o},a.default.createElement(b,s()({alt:n},i)))},x=e=>{let{tabIndex:t,className:o,style:n}=e,i=r()(e,d);return a.default.createElement(p,{tabIndex:t,className:o,style:n},a.default.createElement(h,s()({role:"img"},i),i.children))},I=a.default.forwardRef((e,t)=>a.default.createElement("label",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`})))},"../forms/src/Client/Components/Teaser/Teaser.tsx":function(e,t,o){"use strict";o.r(t);o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/lodash-es/uniqueId.js"),s=o("../../node_modules/goober/dist/goober.esm.js"),a=o("../forms/src/ClientStore/index.ts"),l=o("../forms/src/Client/Components/ResetElements/index.tsx"),c=o("../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx"),d=o("../forms/src/Constants/quill.ts");var m=({formVersionCId:e})=>{const t=Object(r.c)(t=>a.u.openFormVersionSelectById(t,e)),o=Object(r.c)(e=>a.q.formVersionSelectById(e,t.formVersionId)),s=Object(r.c)(a.n.getMobileDesktopType),m=Object(r.c)(e=>a.y.teasersByFormVersion(e,o.formVersionId))[0],[u,p]=Object(n.useState)();Object(n.useEffect)(()=>{p(Object(i.a)("modal_animation_key"))},[o.formType,o.formTypeDirection,s]);const f=c.a.TEXT;return u?n.default.createElement(l.b,null,n.default.createElement(n.Suspense,{fallback:n.default.createElement(l.b,null)},n.default.createElement(f,{itemId:m.teaserId,parentType:d.b}))):null},u=o("../forms/src/Constants/designer.ts"),p=o("../forms/src/Constants/modal.ts"),f=o("../forms/src/Constants/components.ts"),b=o("../forms/src/Constants/teasers.ts"),g=o("../forms/src/Constants/formTypes.ts");const h={[b.f]:{[g.l]:{},[g.k]:{},[g.m]:{},[g.d]:{},[g.e]:{},[g.b]:{},[g.a]:{},[g.c]:{}},[b.a]:{[g.l]:{},[g.k]:{},[g.m]:{},[g.d]:{},[g.e]:{},[g.b]:{},[g.a]:{},[g.c]:{}},[b.b]:{[g.l]:{clipPath:"polygon(100% 0, 0 100%, 0 0)"},[g.m]:{clipPath:"polygon(100% 100%, 0 0, 100% 0)"},[g.b]:{clipPath:"polygon(0 0, 0 100%, 100% 100%)"},[g.c]:{clipPath:"polygon(100% 100%, 0 100%, 100% 0)"}}},y=({theme:e,type:t,direction:o})=>{const n=Math.sqrt(e.size*e.size*2)/2,r=Math.sqrt(e.size*e.size-n*n);return{[b.f]:{[g.k]:{},[g.d]:{writingMode:"vertical-lr",transform:"rotate(180deg)"},[g.e]:{writingMode:"vertical-lr"},[g.a]:{}},[b.a]:{[g.d]:{width:e.size-16},[g.e]:{width:e.size-16}},[b.b]:{[g.l]:{width:Math.sqrt(e.size*e.size*2),transform:"rotate(-45deg)",transformOrigin:"top left",top:e.size/2,left:-1*e.size/2,position:"relative",height:r,display:"flex",flexDirection:"column-reverse",alignItems:"center"},[g.m]:{width:Math.sqrt(e.size*e.size*2),transform:"rotate(45deg)",transformOrigin:"top left",top:-1*e.size/2,left:e.size/2,position:"relative",height:r,display:"flex",flexDirection:"column-reverse",alignItems:"center"},[g.b]:{height:e.size-16,width:Math.sqrt(e.size*e.size*2),transform:"rotate(45deg)",transformOrigin:"top left"},[g.c]:{height:e.size-16,width:Math.sqrt(e.size*e.size*2),position:"relative",top:e.size,left:0,transform:"rotate(-45deg)",transformOrigin:"top left"}}}[t][o]||{}};var C=o("../forms/src/Utils/isMobile.ts"),x=o("../../node_modules/@babel/runtime/helpers/extends.js"),I=o.n(x),v=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),j=o.n(v),O=o("../forms/src/Constants/animation.ts");const S=["teaserType","teaserDirection","animatingOut","endAnimationCallback"],w={[b.f]:{CENTER_LEFT:"slideinleft",TOP:"slideinup",BOTTOM:"slideindown",CENTER_RIGHT:"slideinright"},[b.a]:{CENTER_LEFT:"slideinleft",TOP:"slideinup",BOTTOM:"slideindown",CENTER_RIGHT:"slideinright"},[b.b]:{TOP_LEFT:"slideintopleft",BOTTOM_LEFT:"slideinbottomleft",TOP_RIGHT:"slideintopright",BOTTOM_RIGHT:"slideinbottomright"}},E=({teaserType:e,teaserDirection:t,animatingOut:o=!1})=>{const n=w[e],r=n[Object.keys(n).find(e=>t&&t.startsWith(e))];return Object.assign({},O.a,{animationDuration:".4s",animationName:"klaviyo-"+r},o?{animationDirection:"reverse"}:{animationDirection:"normal"})},T=e=>{let{teaserType:t,teaserDirection:o,animatingOut:r=!1,endAnimationCallback:i=(()=>{})}=e,s=j()(e,S);const[a,c]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{r&&c(!1)},[r]),n.default.createElement(l.b,I()({},s,{onAnimationEnd:()=>{c(!0),i()},style:Object.assign({height:"100%",width:"100%"},(!a||r)&&E({teaserType:t,teaserDirection:o,animatingOut:r})||{})}))};let k,_=e=>e;t.default=({formVersionCId:e,className:t})=>{var o,c;const d=Object(r.c)(a.e.isDesignWorkflow),x=Object(r.c)(t=>a.u.openFormVersionSelectById(t,e)),I=Object(r.c)(e=>a.q.formVersionSelectById(e,x.formVersionId)),v=Object(r.c)(a.n.getMobileDesktopType)===u.e||Object(C.a)(),j=Object(r.c)(e=>a.y.teasersByFormVersion(e,I.formVersionId))[0],O=Object(r.c)(e=>a.y.getTeaserTheme(e,j.teaserId)),S=Object(r.b)(),[w,E]=Object(n.useState)(),[V,$]=Object(n.useState)(!1),F=Object(n.useCallback)(()=>{V&&!d&&S(a.u.updateCurrentTeaser({id:e,changes:{currentTeaserId:null}}))},[V]);Object(n.useEffect)(()=>{E(Object(i.a)("teaser_animation_key"))},[j.type,j.direction]);const A=j.type===b.f&&((null==(o=j.direction)?void 0:o.includes("TOP"))||(null==(c=j.direction)?void 0:c.includes("BOTTOM")))&&v,D={theme:O,type:j.type,direction:j.direction},z=Object.assign({zIndex:d?0:p.a,position:d?"absolute":"fixed",filter:`drop-shadow(0px 0px ${O.dropShadow.blur}px ${O.dropShadow.color})`},(({theme:e,type:t,direction:o})=>{const n=e.margin.left,r=e.margin.top;return{[b.f]:{[g.l]:{top:0,left:0,margin:`${r}px ${n}px`},[g.k]:{top:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[g.m]:{top:0,right:0,margin:`${r}px ${n}px`},[g.d]:{left:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[g.e]:{right:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[g.b]:{bottom:0,left:0,margin:`${r}px ${n}px`},[g.a]:{bottom:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[g.c]:{bottom:0,right:0,margin:`${r}px ${n}px`}},[b.a]:{[g.l]:{top:0,left:0,margin:`${r}px ${n}px`},[g.k]:{top:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[g.m]:{top:0,right:0,margin:`${r}px ${n}px`},[g.d]:{left:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[g.e]:{right:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[g.b]:{bottom:0,left:0,margin:`${r}px ${n}px`},[g.a]:{bottom:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[g.c]:{bottom:0,right:0,margin:`${r}px ${n}px`}},[b.b]:{[g.l]:{top:0,left:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[g.m]:{top:0,right:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[g.b]:{bottom:0,left:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[g.c]:{bottom:0,right:0,height:e.size,width:e.size,margin:`${r}px ${n}px`}}}[t][o]})(D),(({theme:e,type:t,direction:o})=>({[b.f]:{[g.l]:{maxHeight:64,width:e.size-16},[g.k]:{maxHeight:64,width:e.size-16},[g.m]:{maxHeight:64,width:e.size-16},[g.d]:{maxWidth:64,height:e.size-16},[g.e]:{maxWidth:64,height:e.size-16},[g.b]:{maxHeight:64,width:e.size-16},[g.a]:{maxHeight:64,width:e.size-16},[g.c]:{maxHeight:64,width:e.size-16}},[b.a]:{[g.l]:{height:e.size-16,width:e.size-16},[g.k]:{height:e.size-16,width:e.size-16},[g.m]:{height:e.size-16,width:e.size-16},[g.d]:{width:e.size-16,height:e.size-16},[g.e]:{width:e.size-16,height:e.size-16},[g.b]:{height:e.size-16,width:e.size-16},[g.a]:{height:e.size-16,width:e.size-16},[g.c]:{height:e.size-16,width:e.size-16}},[b.b]:{[g.l]:{},[g.m]:{},[g.b]:{},[g.c]:{}}}[t][o]||{}))(D),A?{width:`calc(100% - ${2*O.margin.left}px)`}:{}),R=Object.assign({overflow:"hidden"},h[j.type][j.direction]||{},((e,t,o)=>{const n={};switch(t){case b.f:n.borderRadius=((e,t)=>{const o=e.margin.top,n=e.margin.left;let[r,i,s,a]=[e.borderRadius,e.borderRadius,e.borderRadius,e.borderRadius];return null!=t&&t.includes("BOTTOM")&&0===o&&(s=0,a=0),null!=t&&t.includes("TOP")&&0===o&&(i=0,r=0),null!=t&&t.includes("LEFT")&&0===n&&(r=0,a=0),null!=t&&t.includes("RIGHT")&&0===n&&(i=0,s=0),null!=t&&t.includes("CENTER")&&null!=t&&t.includes("LEFT")&&0===o&&(r=0,a=0),null!=t&&t.includes("CENTER")&&null!=t&&t.includes("RIGHT")&&0===o&&(i=0,s=0),`${r}px ${i}px ${s}px ${a}px`})(e,o);break;case b.a:n.borderRadius="50%"}return n})(O,j.type,j.direction),(M=O,Object.assign({backgroundColor:M.backgroundColor},M.backgroundImage?{backgroundImage:M.backgroundImage&&`url(${M.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:M.backgroundImage&&("custom"===M.backgroundImage.position?M.backgroundImage.customWidth+"px":M.backgroundImage.position),backgroundPositionX:M.backgroundImage&&M.backgroundImage.alignment,backgroundPositionY:(null==(N=M.backgroundImage)?void 0:N.verticalAlignment)||"center"}:{})),b.f===j.type||b.a===j.type?{height:"calc(100% - 16px)",padding:8}:{height:"100%"},j.type===b.b?{display:"block"}:{display:"flex",flexDirection:"column",justifyContent:"center"});var M,N;const W=Object(s.a)(k||(k=_`
&& {
    cursor: pointer;
    * {
      cursor: pointer;
    }
    /* This had to be added to override the quill editor's cursor: text */
    .${0} .ql-editor > * {
      cursor: pointer;
    }
  }
`),f.l);return j?n.default.createElement(l.b,{className:`kl-teaser-${I.formId} ${t}`,style:z,onClick:()=>{$(!0)}},n.default.createElement(T,{key:w,teaserType:j.type,teaserDirection:j.direction,animatingOut:V,endAnimationCallback:F,"data-testid":"animated-teaser"},n.default.createElement(l.i,{style:R,className:W},n.default.createElement(l.b,{style:y(D)},n.default.createElement(m,{formVersionCId:e}))))):null}},"../forms/src/Client/Components/View/Canned/ErrorView.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/src/Client/Components/ResetElements/index.tsx");t.a=({isEmbed:e=!1})=>n.default.createElement(r.b,{style:{width:e?"100%":450,height:165,display:"flex",justifyContent:"center",alignItems:"center",background:"#ffffff"}},n.default.createElement(r.b,{style:{textAlign:"center",width:300}},"An error occurred when submitting. Please try again later."))},"../forms/src/Client/Components/View/index.ts":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.array.sort.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../forms/src/Client/formActions/formActions.ts"),s=o("../forms/src/Constants/designer.ts"),a=o("../forms/src/Constants/formTypes.ts"),l=o("../forms/src/Constants/views.ts"),c=o("../../node_modules/@babel/runtime/helpers/extends.js"),d=o.n(c);o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var m=o("../../node_modules/lodash-es/merge.js"),u=o("../forms/src/Constants/defaultTheme/formComponent.ts"),p=o("../forms/src/ClientStore/index.ts"),f=o("../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx"),b=o("../forms/src/Client/Components/ResetElements/index.tsx");const g=({children:e})=>e,h={outer:{right:"0 0 0 auto",left:"0 auto 0 0",center:"0 auto"},inner:{right:"flex-end",left:"flex-start",center:"center"}};var y=({componentId:e,componentPosition:t,formVersionCId:o,rowDroppableHover:i,setDragState:a,dragFinished:l})=>{const[c,y]=Object(n.useState)(!1),C=Object(n.useRef)(null),x=Object(r.b)(),I=Object(r.c)(t=>p.i.componentSelectById(t,e),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),v=Object(r.c)(p.e.isDesignWorkflow),j=Object(r.c)(p.n.getActiveComponentId),{currentViewId:O}=Object(r.c)(e=>p.u.openFormVersionSelectById(e,o)),S=Object(r.c)(t=>p.i.getComponentTheme(t,e,O),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),w=Object(r.c)(e=>p.C.getViewTheme(e,O)),E=Object(n.useMemo)(()=>Object(m.a)({},w,S,{[u.a.THEME_KEY]:I.data.styling}),[w,S,I.data.styling]),T=f.a[I.componentType],k=j===I.componentId,_=Object.assign({component:I},v?{onClick:()=>{x(p.n.slice.actions.setActiveSidebar({type:s.b,key:e}))},onMouseOver:()=>{l?a(!1):y(!0)},onMouseLeave:()=>y(!1),onDragStart:()=>y(!1),onDragEnd:()=>{a(!0)},ref:C}:{});return n.default.createElement(b.b,d()({style:Object.assign({display:"flex",justifyContent:h.inner[I.data.styling.innerAlignment]||"flex-start",padding:`${E[u.a.THEME_KEY].padding.top||0}px ${E[u.a.THEME_KEY].padding.right||0}px ${E[u.a.THEME_KEY].padding.bottom||0}px ${E[u.a.THEME_KEY].padding.left||0}px`,position:"relative"},E[u.a.THEME_KEY].blockBackgroundColor?{backgroundColor:E[u.a.THEME_KEY].blockBackgroundColor}:{},c?{cursor:"pointer"}:{},{flex:!1!==I.data.styling.fullWidth?"1 0 0":"0 1 auto"},!1===I.data.styling.fullWidth&&I.data.styling.alignment?{margin:h.outer[I.data.styling.alignment]}:{})},_,{"data-testid":"form-component",className:void 0}),v?n.default.createElement(g,{theme:E,active:k,componentId:e,componentPosition:t,componentRef:C.current,formVersionCId:o,isHovering:c,rowDroppableHover:i,setIsHovering:y},n.default.createElement(T,{theme:E,componentId:e,formVersionCId:o,itemId:e})):n.default.createElement(T,{theme:E,componentId:e,formVersionCId:o,itemId:e}))};var C=({rowId:e,formVersionCId:t})=>{const o=Object(r.c)(t=>p.w.getRowComponentIds(t,e)),[i,s]=Object(n.useState)(!1),[a,l]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),m=(i?"top":a&&"bottom")||!1;return o.length?n.default.createElement(b.b,{"data-testid":"form-row",style:Object.assign({display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},m?Object.assign({},"bottom"===m?{borderBottom:"2px",borderBottomStyle:"solid",borderBottomColor:"#2B98D3",marginBottom:"-2px"}:{borderTop:"2px",borderTopStyle:"solid",borderTopColor:"#2B98D3",marginTop:"-2px"}):{})},o.map((e,o)=>n.default.createElement(y,{key:e,componentId:e,componentPosition:o,formVersionCId:t,rowDroppableHover:(e,t)=>{"top"===e?s(t):l(t)},setDragState:e=>d(e),dragFinished:c})),null):null},x=o("../forms/src/Utils/isMobile.ts");const I=({children:e})=>e;var v=({columnId:e,formVersionCId:t,formVersionId:o,viewId:i,sideImageExistsAndHidden:a})=>{var l,c,m,u,f,g,h,y;const v=Object(r.b)(),j=Object(n.useRef)(null),[O,S]=Object(n.useState)(!1),w=Object(r.c)(p.e.isDesignWorkflow),E=Object(r.c)(e=>p.q.getFormVersionSideImage(e,o)),T=Object(r.c)(t=>p.g.getColumnRowIds(t,e)),k=Object(r.c)(t=>p.g.columnSelectById(t,e)),_=Object(r.c)(e=>p.C.getViewTheme(e,i)),V=Object(r.c)(e=>p.n.getActiveColumnId(e)),{padding:$,minimumHeight:F}=_,A=void 0!==(null==(l=k.data)||null==(c=l.styling)?void 0:c.sizeMultiplier)&&0===k.rows.length,{columnMargin:D,columnPadding:z}=((e,t,o,n)=>{const r={top:0,left:0,right:0,bottom:0},i={top:0,left:0,right:0,bottom:0};return n||void 0!==o&&(e?(r.top=t&&t.top?-1*t.top:0,r.bottom=t&&t.bottom?-1*t.bottom:0,0===o?r.left=t&&t.left?-1*t.left:0:1===o&&(r.right=t&&t.right?-1*t.right:0)):0===o?i.left=(null==t?void 0:t.left)||0:1===o&&(i.right=(null==t?void 0:t.right)||0)),{columnMargin:r,columnPadding:i}})(A,$,null==E?void 0:E.position,a),R=null==k||null==(m=k.data)||null==(u=m.styling)?void 0:u.sizeMultiplier,M=null==_?void 0:_.size,N=R&&M?((e,t,o)=>{const n=e/(e+1)*t;return o?n:t-n})(R,M,A):0,W=V===k.columnId,P=(null==_?void 0:_.borderStyle)&&"none"!==(null==_?void 0:_.borderStyle)&&(null==_?void 0:_.borderWidth)||0,B=null==k||null==(f=k.data)||null==(g=f.styling)?void 0:g.backgroundImage,H=null==k||null==(h=k.data)||null==(y=h.styling)?void 0:y.backgroundColor,L=Object.assign({},w&&A?{onClick:()=>{v(p.n.slice.actions.setActiveSidebar({type:s.a,key:e}))},onMouseOver:()=>{S(!0)},onMouseLeave:()=>S(!1),ref:j}:{}),q=Object(r.c)(e=>p.n.getMobileDesktopType(e))===s.e;return((e,t,o,n)=>{var r,i,s,a,l;const c=(null==(r=e.rows)?void 0:r.length)>0,d=(null==e||null==(i=e.data)||null==(s=i.styling)?void 0:s.backgroundImage)||(null==e||null==(a=e.data)||null==(l=a.styling)?void 0:l.backgroundColor);return!!c||(o?!n||t:!!d&&(!Object(x.a)()||t))})(k,(null==E?void 0:E.displayOnMobile)||!1,w,q)?n.default.createElement(n.default.Fragment,null,n.default.createElement(b.b,d()({style:Object.assign({display:"flex",flexDirection:"column",width:N?N+"px":"100%",marginTop:D.top+"px",marginBottom:D.bottom+"px",marginLeft:D.left+"px",marginRight:D.right+"px",paddingTop:z.top+"px",paddingBottom:z.bottom+"px",paddingLeft:z.left+"px",paddingRight:z.right+"px",backgroundColor:H},O?{cursor:"pointer"}:{},N?{minWidth:N+"px"}:{},B?{backgroundImage:`url(${B.url})`,backgroundRepeat:"no-repeat",backgroundSize:"custom"===B.position?B.customWidth+"px":B.position,backgroundPositionX:B.alignment,backgroundPositionY:B.verticalAlignment||"center"}:{},void 0!==F?{minHeight:F+"px"}:{},A?{}:{justifyContent:"center"})},null!=B&&B.altText?{title:null==B?void 0:B.altText}:{},L),n.default.createElement(I,{backgroundColorExists:!!H,backgroundImageExists:!!B,calculatedWidth:N,column:k,isDesignWorkflow:w,isHovering:O,isSelected:W,isSideImageColumn:A,viewBorderWidth:P,viewSize:M},null==T?void 0:T.map(e=>n.default.createElement(C,{key:e,rowId:e,formVersionCId:t}))))):null},j=o("../forms/src/Utils/calculateSideImageSize.ts");const O={left:{float:"left"},center:{margin:"0 auto"},right:{float:"right"}},S=(e,t,o)=>t?null!=o&&o.includes("BOTTOM")?`${e}px ${e}px 0 0`:`0 0 ${e}px ${e}px`:e+"px";var w=({viewId:e,isEmbed:t,formVersionId:o,formVersionCId:c,isDocked:d,formTypeDirection:m})=>{var u,f,g;const h=Object(r.c)(e=>p.q.formVersionSelectById(e,o)),y=Object(r.c)(t=>p.C.getViewColumnIds(t,e)),C=Object(r.c)(e=>p.g.columnSelectAll(e)).filter(e=>y.includes(e.columnId)).sort((e,t)=>e.position-t.position),I=Object(r.c)(t=>p.i.getSubmitFormActionsFromView(t,e)),w=Object(r.c)(t=>p.C.getViewTheme(t,e)),E=Object(r.c)(e=>p.q.getFormVersionSideImage(e,o)),T=null==E||null==(u=E.data)||null==(f=u.styling)?void 0:f.sizeMultiplier,k=T?Object(j.a)(T,w.size):0,_=Object(r.c)(t=>p.g.getViewColumns(t,e)).find(e=>e.position===(null==E?void 0:E.position)),V=Object(r.c)(p.e.isDesignWorkflow),$=Object(r.c)(e=>p.n.getMobileDesktopType(e))===s.e,F=((e,t,o,n,r)=>{var i,s,a,l;const c=!o&&(Object(x.a)()&&!t||t&&r),d=!t&&e&&!(null!=n&&null!=(i=n.data)&&null!=(s=i.styling)&&s.backgroundImage||null!=n&&null!=(a=n.data)&&null!=(l=a.styling)&&l.backgroundColor);return c||d})(!!E,V,null==E?void 0:E.displayOnMobile,_,$),A=F?w.size-k:void 0,D=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=D.current;h.formType===a.j&&e&&e.focus()},[D]),n.default.createElement(b.c,{style:Object.assign({display:"flex",flexDirection:"row",boxSizing:"border-box"},t?Object.assign({width:"100%",overflow:"visible"},w.isMaxWidth?{maxWidth:w.size+"px"}:{},w.embedAlignment?O[w.embedAlignment]:{}):{overflow:"hidden",width:(A||w.size)+"px",minWidth:l.b+"px",maxWidth:l.a+"px"},{borderRadius:""+S(w.borderRadius,d,m),borderStyle:w.borderStyle,borderWidth:(w.borderWidth||0)+"px",borderColor:w.borderColor,backgroundColor:w.backgroundColor,backgroundImage:w.backgroundImage&&`url(${w.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:w.backgroundImage&&("custom"===w.backgroundImage.position?w.backgroundImage.customWidth+"px":w.backgroundImage.position),backgroundPositionX:w.backgroundImage&&w.backgroundImage.alignment,backgroundPositionY:(null==(g=w.backgroundImage)?void 0:g.verticalAlignment)||"center",paddingTop:w.padding.top+"px",paddingRight:w.padding.right+"px",paddingBottom:w.padding.bottom+"px",paddingLeft:w.padding.left+"px"}),className:"klaviyo-form klaviyo-form-version-cid_"+c,"data-testid":"klaviyo-form-"+h.formId,noValidate:!0,ref:D,tabIndex:-1,onSubmit:async e=>{if(e.preventDefault(),1!==I.length)return!1;const{actionId:t}=I[0],o=Object(i.a)({actionId:t,formVersionCId:c});return await new o({actionId:t,formVersionCId:c}).runAction(),!0}},C.map(t=>n.default.createElement(v,{key:t.columnId,columnId:t.columnId,formVersionCId:c,formVersionId:o,viewId:e,sideImageExistsAndHidden:F})),n.default.createElement("input",{style:{display:"none"},type:"submit",tabIndex:-1,value:"Submit"}))};t.a=w},"../forms/src/Client/Render.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/preact/dist/preact.module.js"),s=o("../../node_modules/goober/dist/goober.esm.js"),a=o("../forms/src/ClientStore/store.ts"),l=o("../../node_modules/@babel/runtime/helpers/extends.js"),c=o.n(l),d=o("../../node_modules/react-portal/es/PortalWithState.js");var m=o("../forms/src/Client/Components/Modal/Modal.tsx").default,u=o("../forms/src/ClientStore/index.ts");var p=o("../forms/src/Client/Components/Teaser/Teaser.tsx").default,f=o("../forms/src/Constants/teasers.ts");var b=({formVersionCId:e,node:t})=>{const o=Object(r.b)(),i=Object(r.c)(u.e.isDesignWorkflow),s=Object(r.c)(t=>u.u.selectById(t,e)),a=Object(r.c)(e=>u.x.teasersByFormVersion(e,null==s?void 0:s.formVersionId)),l=a.length>0?a[0]:null;if(i&&null===t)return null;return n.default.createElement(d.a,{key:e,defaultOpen:!0,onClose:()=>o(u.u.closeForm({formVersionCId:e})),closeOnEsc:!i,node:i?t:void 0},({closePortal:t,portal:r})=>[r(n.default.createElement(n.default.Fragment,null,null!=s&&s.currentTeaserId?n.default.createElement(p,{formVersionCId:e,closePortal:i?()=>{}:t}):n.default.createElement(m,{formVersionCId:e,closePortal:i?()=>{}:()=>(t=>{!l||l.displayOrder!==f.c&&l.displayOrder!==f.e?t():(o(u.u.updateCurrentTeaser({id:e,changes:{currentTeaserId:l.teaserId}})),o(u.u.closeFormAndOpenTeaser({formVersionCId:e})))})(t)})))])},g=o("../forms/src/Client/Components/View/index.ts"),h=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),y=o("../forms/src/Client/Components/ResetElements/index.tsx");var C=({node:e,formVersionCId:t})=>{const o=Object(r.c)(e=>u.u.openFormVersionSelectById(e,t)),i=e||document.querySelector(`div.klaviyo-form-${o.formId}.form-version-cid-${t}`);return i?Object(n.createPortal)(o.currentViewId?n.default.createElement(n.default.Fragment,null,o.showErrorView?n.default.createElement(h.a,{isEmbed:!0}):n.default.createElement(y.b,{style:{transform:"translate(0, 0)"}},n.default.createElement(g.a,{formVersionCId:t,formVersionId:o.formVersionId,viewId:o.currentViewId,isEmbed:!0,key:t}))):null,i):null};var x=()=>{const e=Object(r.c)(u.u.openFormVersionSelectIds),t=Object(r.c)(u.u.getOpenEmbedFormVersionIds);return n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",null)},e.map(e=>{const o={formVersionCId:e};return t.includes(e)?n.default.createElement(C,c()({key:e},o)):n.default.createElement(b,c()({key:e},o))}))};Object(s.b)(i.g);t.default=()=>{const e=document.createElement("div");e.setAttribute("id","dynamic-react-root"),document.body.appendChild(e),Object(n.render)(n.default.createElement(r.a,{store:a.a},n.default.createElement(x,null)),e)}},"../forms/src/Client/formActions/formActions.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return q}));var n=o("../forms/src/ClientStore/store.ts"),r=o("../forms/src/ClientStore/index.ts"),i=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),s=o.n(i),a=o("../forms/src/Constants/actions.ts"),l=(o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../forms/src/Utils/debug.ts"));class c{constructor({formVersionCId:e,actionId:t}){this.currentHandlerStep="INSTANTIATED",this.formActionType=void 0,this.actionId=void 0,this.formVersionCId=void 0,this.formAction=void 0,this.formId=void 0,this.companyId=void 0,this.actionId=t,this.formVersionCId=e,this.formAction=r.b.actionSelectById(n.a.getState(),t);const o=n.a.getState();this.formId=r.u.getOpenFormVersionFormId(o,e),this.companyId=r.e.getKlaviyoCompanyId(o)}runAction(){return this.currentHandlerStep="PREHANDLER",new Promise(e=>e()).then(e=>this.__preHandler(e)).then(e=>(this.currentHandlerStep="HANDLER",e)).then(e=>this.__handler(e)).then(e=>(this.currentHandlerStep="POSTHANDLER",e)).then(e=>this.__postHandler(e)).catch(e=>this.__errorHandler(e))}__preHandler(e){}__handler(e){}__postHandler(e){}__errorHandler(e){Object(l.a)(e.toString(),{formActionType:this.formActionType,currentHandlerStep:this.currentHandlerStep})}}const d=["isSubmit"];class m extends c{constructor(e){let{isSubmit:t}=e;super(s()(e,d)),this.isSubmit=void 0,this.isSubmit=t,this.formActionType=a.a}__handler(){return n.a.dispatch(r.u.closeForm({formVersionCId:this.formVersionCId,logMetric:!this.isSubmit}))}}m.formActionType=a.a;var u=m,p=o("../forms/src/Utils/errorTypes.ts"),f=o("../forms/src/Utils/promise.ts"),b=o("../forms/src/Utils/onsiteApi/learnq.ts"),g=o("../forms/src/ClientStore/logMetricAsync/actions.ts");o("../../node_modules/preact/compat/dist/compat.module.js");var h=o("../forms/src/Constants/metrics.ts"),y=o("../../node_modules/unfetch/dist/unfetch.mjs"),C=o("../config/lib/client.json");const x=`${C.API.url}${C.API.submitToListPath}`;var I=o("../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),v=o("../forms/src/Sentry.tsx"),j=o("../forms/src/Utils/camelizeKeys.ts");const O=C.API.url+"/ajax/sms/subscribe_unique_id",S=e=>e instanceof p.d;var w=class extends c{constructor(e){super(e),this.hiddenFieldsComponentId=void 0,this.composedFields=void 0;const t=n.a.getState();this.hiddenFieldsComponentId=r.i.getComponentIdByActionId(t,e.actionId),this.composedFields=r.u.getComposedFields(t,this.formVersionCId,this.hiddenFieldsComponentId)}async __preHandler(){const e=await n.a.dispatch(r.u.validateOpenFormVersion({formVersionCId:this.formVersionCId}));if(Object(I.f)(e)){const{components:t}=e.payload;if(t.some(({valid:e})=>!e))throw new p.c({type:"form"})}return!0}__requestUniqueID(){(e=>{const t={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(Object(j.b)(e))};return Object(y.a)(O,t).then(e=>{if(e.status>=500)throw Error("Error sending request: "+e.url);return e}).then(e=>e.json()).then(e=>Object(j.a)(e))})({companyId:this.companyId,form_id:this.formId,email:this.composedFields.$email}).then(({data:{uniqueId:e}})=>{void 0!==e&&n.a.dispatch(r.e.slice.actions.setSmsSubscriptionUniqueId(e))}).catch(()=>{})}__errorHandler(e){const{composedFields:t,formId:o,companyId:i,formAction:s}=this;if(c.prototype.__errorHandler.call(this,e),(e=>[p.a,p.c].some(t=>e instanceof t))(e))throw e;n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),n.a.dispatch(Object(g.a)({metric:S(e)?h.i:h.c,formId:o,companyId:i,submittedFields:t,listId:null==s?void 0:s.listId})),Object(p.f)(e)||S(e)||v.a.captureException(e,{tags:{onSubmit:!0},extra:{submitAction:!0,formId:this.formId,companyId:this.companyId}})}};var E=class extends w{__handler(){const e=n.a.getState();Object(b.a)(this.composedFields);const t=r.u.getSubscriptionOnlyComponentData(e,this.formVersionCId);return this.composedFields=Object.assign({},this.composedFields,t||{}),r.i.anyComponentHasSubscribeToSMSAction(e,r.u.getOpenFormVersionFormVersionId(e,this.formVersionCId))&&this.__requestUniqueID(),this.__submitToList()}__submitHandlerCheck({success:e,errors:t=[]}){const{composedFields:o,formId:i,companyId:s,formAction:a}=this;if(!e&&"List does not exist."!==t[0])throw n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),n.a.dispatch(Object(g.a)({metric:h.c,formId:i,companyId:s,submittedFields:o,listId:a.listId})),new p.a(t.join(" | "))}__submitToList(){const{composedFields:e,formId:t,companyId:o}=this;return(e=>Object(y.a)(x,{method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:e.toString()}))(this.__makePOSTBody({composedFields:e})).then(e=>{if(429===e.status)throw new p.d;return e.json()}).then(i=>i.success&&this.formAction.actionType?(n.a.dispatch(r.l.slice.actions.successForm({formId:t,successActionType:this.formAction.actionType})),Object(f.b)(200,n.a.dispatch(Object(g.a)({metric:h.h,logCustomEvent:!0,formId:t,companyId:o,submittedFields:e,action_type:"Submit Form"}))).then(()=>i).catch(()=>i)):i)}__makePOSTBody({composedFields:e}){const t=new Date,o=Object.assign({},e,"object"==typeof window.Shopify&&window.Shopify.shop?{services:JSON.stringify({shopify:{source:"form"}})}:{}),{$exchange_id:n}=Object(b.c)(),r=Object.assign({g:this.formAction.listId,$fields:Object.keys(o).toString(),$list_fields:Object.keys(o).filter(e=>Array.isArray(o[e])).toString(),$timezone_offset:-t.getTimezoneOffset()/60},o,n?{$exchange_id:n}:{}),i=new URLSearchParams;return Object.keys(r).forEach(e=>{const t=r[e];return Array.isArray(t)?t.forEach(t=>i.append(e,t)):i.set(e,t)}),i}};class T extends E{__postHandler({success:e,errors:t=[]}){return r.u.openFormVersionSelectIds(n.a.getState()).includes(this.formVersionCId)&&this.formAction.viewId?(this.__submitHandlerCheck({success:e,errors:t}),n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{currentViewId:this.formAction.viewId}}))):null}}T.formActionType=a.f;var k=T;o("../../node_modules/core-js/modules/es6.regexp.replace.js");const _=["isSubmit"];class V extends c{constructor(e){var t,o;let{isSubmit:n}=e;super(s()(e,_)),this.redirectUrl=void 0,this.newWindow=void 0,this.isSubmit=void 0,this.redirectUrl=(null==(t=this.formAction.data)?void 0:t.redirectUrl)||"about:blank",this.newWindow=!(null==(o=this.formAction.data)||!o.newWindow)&&this.formAction.actionType===a.b,this.isSubmit=!!n,this.formActionType=a.b}__redirectUrl(){const e=this.redirectUrl.replace(/^javascript:/,"");if(this.newWindow&&this.formAction.actionType===a.b){const t=window.open(e,"_blank");null==t||t.focus()}else window.location.assign(e)}__handler(){const{formId:e,newWindow:t,formVersionCId:o}=this;this.formAction.actionType===a.b&&n.a.dispatch(r.l.slice.actions.successForm({formId:e,successActionType:a.b}));const i=r.u.getOpenFormVersionSentSubmitMetric(n.a.getState(),o),s=n.a.dispatch(Object(g.a)({metric:h.g,logTelemetric:!this.isSubmit&&!i,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Go to URL",destination_url:this.redirectUrl}));return t?(this.__redirectUrl(),s):Object(f.b)(200,s).then(()=>this.__redirectUrl()).catch(()=>this.__redirectUrl())}}V.formActionType=a.b;var $=V;class F extends E{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new $({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}F.formActionType=a.e;var A=F;class D extends E{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new u({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}D.formActionType=a.d;var z=D;const R=e=>"This form is now set to display on Mobile devices only and subscribers will be routed to the list set on the "+e.toLowerCase()+" keyword.",M=e=>e+" Keyword",N=e=>e+" Message";R("Opt-in"),M("Opt-in"),N("Opt-in"),R("Subscribe"),M("Subscribe"),N("Subscribe");class W extends c{constructor(e){var t,o,n;super(e),this.toPhoneNumber=void 0,this.optInMessage=void 0,this.optInKeyword=void 0,this.toPhoneNumber=null==(t=this.formAction.data)?void 0:t.toPhoneNumber,this.optInMessage=(null==(o=this.formAction.data)?void 0:o.optInMessage)||"Send this text to subscribe to SMS updates!",this.optInKeyword=(null==(n=this.formAction.data)?void 0:n.optInKeyword)||"JOIN",this.formActionType=a.g}__handler(){const e=r.e.getSmsSubscriptionUniqueId(n.a.getState()),t=function(e){return e&&6===e.length}(e)?`${this.optInKeyword}:${e}`:this.optInKeyword,o=`sms:${this.toPhoneNumber}?&body=${encodeURIComponent(`${this.optInMessage} (ref:${t})`)}`;n.a.dispatch(r.u.closeForm({formVersionCId:this.formVersionCId}));const i=n.a.dispatch(Object(g.a)({metric:h.j,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Subscribe Via SMS",sms_keyword:this.optInKeyword,destination_url:o}));return Object(f.b)(200,i).then(()=>window.location.assign(o)).catch(()=>window.location.assign(o))}}W.formActionType=a.g;var P=W;class B extends w{__handler(){const{formVersionCId:e,formAction:t,composedFields:o,formId:i,companyId:s}=this,a=n.a.getState();if(!r.u.openFormVersionSelectIds(a).includes(e)||null==t||!t.viewId)return null;Object(b.a)(o);const l=r.u.getOpenFormVersionFormVersionId(a,e);r.i.anyComponentHasSubscribeToSMSAction(a,l)&&this.__requestUniqueID();return!!Object.keys(r.u.getInputComponentFields(a,e)).length&&r.i.shouldTriggerProfileSubmitMetric(a,l)&&n.a.dispatch(Object(g.a)({metric:h.h,logCustomEvent:!0,formId:i,companyId:s,submittedFields:o,action_type:"Submit Form"})),n.a.dispatch(r.u.updateCurrentView({id:e,changes:{currentViewId:t.viewId}}))}}B.formActionType=a.h;var H=B;const L={[u.formActionType]:u,[k.formActionType]:k,[H.formActionType]:H,[$.formActionType]:$,[z.formActionType]:z,[A.formActionType]:A,[P.formActionType]:P},q=({actionId:e,formVersionCId:t})=>{const o=n.a.getState(),i=r.b.getActionType(o,e),s=r.u.getInputComponentFields(o,t),a=s.$email||s.$phone_number;return i!==k.formActionType||a?L[i]:H}},"../forms/src/Constants/animation.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n={animationTimingFunction:"ease",animationPlayState:"running",animationDelay:"0s",animationIterationCount:1,animationFillMode:"forwards"}},"../forms/src/Constants/modal.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n=9e4},"../forms/src/Constants/quill.ts":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));const n="teaser",r="component"},"../forms/src/Constants/views.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r}));const n=1e3,r=200},"../forms/src/Utils/calculateSideImageSize.ts":function(e,t,o){"use strict";t.a=(e,t)=>e/(e+1)*t}}]);
